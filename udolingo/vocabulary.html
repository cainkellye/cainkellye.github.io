<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocabulary - Udolingo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="udolingo-icon.png">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar">
            <div id="sidebar-header" class="sidebar-header">
                <img alt="mascot" src="udolingo-icon.png" width="30" height="30" />
                <h3>Vocabulary Controls</h3>
                <span class="sidebar-toggle" id="sidebar-toggle">▼</span>
            </div>
            
            <div class="sidebar-content" id="sidebar-content">
                <div class="sidebar-section">
                    <button onclick="window.close()">Close Vocabulary</button>
                </div>
                
                <div class="sidebar-section">
                    <select id="language-pair-select" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 5px; background: white; color: #333;">
                        <option value="" title="Use the vocabulary under an exercise to create, or import from file">No vocabulary pairs</option>
                    </select>
                </div>

                <div class="sidebar-section">
                    <button id="switch-direction-btn" disabled>Switch Direction</button>
                    <button id="add-entry-btn" disabled>Add New Entry</button>
                    <button id="save-changes-btn" disabled>Save Changes</button>
                </div>

                <div class="sidebar-section">
                    <button id="export-vocab-btn" disabled>Export Vocabulary</button>
                    <input type="file" id="import-file-input" accept=".txt,.csv" style="display: none;">
                    <button id="import-vocab-btn">Import from File</button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="container" style="max-width: 60rem;">
                <div id="lesson-header">
                    <img alt="mascot" src="images/udo-reading.png" width="120" height="84" style="margin: 5px 0px 0px 6px;" />
                    <h2 id="vocabulary-title" class="main-title">Vocabulary Manager</h2>
                </div>
                
                <div id="vocabulary-info">
                    <p id="vocabulary-description">
                        Select a language pair from the control panel to view and edit your vocabulary.
                        <br/>
                        If there are none yet, use the vocabulary box under an exercise to create one with those words.
                    </p>
                </div>
                
                <div id="vocabulary-container" style="display: none;">
                    <input id="phrase-filter" placeholder="Enter words, phrases or a sentence to filter vocabulary..." />
                    <div id="vocabulary-grid" class="vocab-grid" style="max-height: 58vh;">
                        <!-- Vocabulary entries will be inserted here -->
                    </div>
                    <div class="modal-buttons">
                        <button id="save-changes-main-btn">Save Changes</button>
                    </div>

                </div>
                
                <div id="no-vocabulary-message" style="display: none; text-align: center; padding: 2rem; color: #666; font-style: italic;">
                    <p>No vocabulary entries found for this language pair.</p>
                    <p>Add vocabulary entries from the main app exercises to see them here.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="import-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Import Vocabulary</h3>
            <p>File format should start with a header line: <code>Vocabulary: sourceLang → targetLang</code></p>
            <p>Followed by vocabulary entries: <code>expression → translation1, translation2, ...</code></p>
            <p>Each entry on a separate line. Supported separators: →, ->, |, tab, :, =</p>
            
            <textarea id="import-preview" rows="10" style="width: 100%; margin: 1rem 0; font-family: monospace; font-size: 0.9rem;"></textarea>
            
            <div class="modal-buttons">
                <button id="confirm-import-btn">Import</button>
                <button id="cancel-import-btn">Cancel</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { VocabularyManager } from './js/features/vocabulary-manager.js';

        // Initialize the vocabulary page
        document.addEventListener('DOMContentLoaded', () => {
            const vocabularyManager = new VocabularyManager();
            vocabularyManager.init();
        });
    </script>
</body>
</html>
